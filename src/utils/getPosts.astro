---
import type { MarkdownInstance } from "astro";
import type { FrontMatter } from "../types";

export async function getPosts(limit = -1) {
  const allPosts = (await Astro.glob(
    "../../posts/*.md",
  )) as MarkdownInstance<FrontMatter>[];
  return allPosts
    .toSorted(
      (a, b) =>
        new Date(b.frontmatter.publishDate).valueOf() -
        new Date(a.frontmatter.publishDate).valueOf(),
    )
    .slice(0, limit);
}
---
